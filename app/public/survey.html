<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Take the Friend Finder Survey</title>
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <!--google font link-->
<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre" rel="stylesheet">
<style>

form{

	background-color:rgba(0,0,0,0.5);
	color:white;
	padding-right: 50px;
	padding-bottom: 50px;
	padding-left: 50px;
	padding-top: 10px;
	font-family: 'Averia Serif Libre', cursive;
}

p {
	font-family: 'Averia Serif Libre', cursive;
}

h1, h4 {
	font-family: 'Averia Serif Libre', cursive;


}

a {
	font-family: 'Averia Serif Libre', cursive;
	color: white;
	font-size: larger;
}

body{
	background: url("https://s3.amazonaws.com/zam-www/assets/editorial/2017/01/ffxv_road.jpg");	
	background-repeat: no-repeat;
	background-position: center center;
	background-attachment: fixed;
	-webkit-background-size: cover;
	-moz-background-size: cover;
	-o-background-size: cover;
	background-size: cover;
}

</style>

</head>
<body>
<div class ="container">

	<!-- <form class ="form-horizontal"> -->
	<form>
	<h1> Tell Us About Yourself</h1>
	<!--for spacing purposes also for the choices, are these selects or dorpdown menus?-->
	<div class = "form-group">
		<label for ="inputEmail">Email</label>
		<input type ="email" class ="form-control" id="inputEmail" placeholder ="Your Email">
	</div>
	<div class ="form-group">
		<label for ="inputName">Your Name</label>
		<input type ="text" class ="form-control" id="inputName" placeholder="Your Name">
	</div>
	<div class ="form-group">
		<h3> Question 1</h3>
		<h4> blah blah blah</h4>
		<!--dropdown menu choices-->			
<!-- 		<div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    Select an option 
			    <span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
			    <li><a href="#">1(Strongly Disagree)</a></li>
			    <li><a href="#">2</a></li>
			    <li><a href="#">3</a></li> 
				<li><a href="#">4</a></li> 
				<li><a href="#">5(Strongly Agree)</a></li> 
			  </ul>
			</div> ends the dropdown menu-->
		<!--Selects be sure to add the script links for chosen-->	    
			<select class="form-control">
			  <option>1 (Strongly Disagree)</option>
			  <option>2</option>
			  <option>3</option>
			  <option>4</option>
			  <option>5 (Strongly Agree)</option>
			</select>
	</div><!--ends question div-->

	<div class ="form-group">
		<h3> Question 2</h3>
		<h4> blah blah blach</h4>
		<!--dropdown menu choices-->			
<!-- 		<div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    Select an option 
			    <span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
			    <li><a href="#">1(Strongly Disagree)</a></li>
			    <li><a href="#">2</a></li>
			    <li><a href="#">3</a></li> 
				<li><a href="#">4</a></li> 
				<li><a href="#">5(Strongly Agree)</a></li> 
			  </ul>
			</div> ends the dropdown menu-->
		<!--Selects be sure to add the script links for chosen-->	    
			<select class="form-control">
			  <option>1 (Strongly Disagree)</option>
			  <option>2</option>
			  <option>3</option>
			  <option>4</option>
			  <option>5 (Strongly Agree)</option>
			</select>
	</div><!--ends question div-->
	
	<div class ="form-group">
		<h3> Question 3</h3>
		<h4> blah blah blach</h4>
		<!--dropdown menu choices-->			
<!-- 		<div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    Select an option 
			    <span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
			    <li><a href="#">1(Strongly Disagree)</a></li>
			    <li><a href="#">2</a></li>
			    <li><a href="#">3</a></li> 
				<li><a href="#">4</a></li> 
				<li><a href="#">5(Strongly Agree)</a></li> 
			  </ul>
			</div> ends the dropdown menu-->
		<!--Selects be sure to add the script links for chosen-->	    
			<select class="form-control">
			  <option>1 (Strongly Disagree)</option>
			  <option>2</option>
			  <option>3</option>
			  <option>4</option>
			  <option>5 (Strongly Agree)</option>
			</select>
	</div><!--ends question div-->
	
	<!--submit button-->

	<button type ="submit" class="btn btn-primar btn-lg btn-block" id ="submit"> Submit Answers</button>


	</form>


<!--insert modal info here with jquery to push the name and photo to the user-->
<!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Here's Your Final Friend</h4>
      </div>
      <div class="modal-body">
        <p>Some text in the modal.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>



</div><!--ends fluid container-->
</body>

<!--FUNCTIONS FOR THE AJAX CALL AND RESULTS-->
<script type ="text/javascript">
//JS to display info in a modal for the friend result
//ajax call to the friends api
function displayFriend(){

	var currentURL = window.location.origin;
	$.ajax({url: currentURL + "/api/friends", method: "GET"})
	.done(function(friendsInfo){
		console.log("--------------");
		console.log("URL:" + currentURL + "/api/friends");
		console.log(friendsInfo);
		console.log("-------------");

		//need to store these differences for later??? May not actually be able to have the people here though (just the numbers)
		var totalDifferencesArray = [];

		for (var friendIndex = 0; friendIndex < friendsInfo.length; friendIndex++){
			// console.log(friendsInfo[i]); new iterator name?
			console.log(friendsInfo[friendIndex].scores);
			//insert infor for the dynamic div element for the friend?  this will give all the info, but maybe they want just one?
			//loop through the score array and compare differences between them from 1 user to another -- need friendsiNfo @ friendIndex and then their score
			var totalDifference = 0; 
			for(var scoreIndex = 0; scoreIndex < friendsInfo[friendsIndex].scores.length; scoreIndex++){
				//get the 1 to 1 scores from this friends score info-- loop through to get these score components 
				//this friend's score @ this value in the score array?-->  
				// need to get the single score values? to setup the comparison 
				//  totalDifference += Math.abs(friendsInfo[friendsIndex].scores[scoreIndex]- newUser.scores[scoreIndex]);
			}//ends inner loop			
		//add the users to the totalDifferencesArray to display later?
		//have total difference for user, plus the total differences array???
		(totalDifferencesArray).push(totalDifference);

		}//ends outer friend loop

		//after totalDiffernece, need to find person with the LEAST difference from my friends array 
		 var minDifference = Math.min(null, totalDifferencesArray);
		 var bestFriendIndex = 0;
		//for loop to figure out where the index of that min number is and get the user?
			for(var differencesIndex = 0; differencesIndex < totalDifferencesArray.length; differencesIndex++){
				if(minDifference == totalDifferencesArray[differencesIndex]){
					bestFriendIndex == differencesIndex; 
				}
			}//end for loop for the differences in the array 
		//get friend out of friendsInfo array 
		console.log(friendsInfo[bestFriendIndex].name);
	});
}

// function captureAnswers(){
// //capture the values from the form 
// //example below in js fiddle http://jsfiddle.net/AlexChariz/fosb6meu/

// 			// <select id="chosen-without-empty" class="chosen">
// 			//     <option value="2">example</option>
// 			//     <option value="3">example 2</option>
// 			// </select>

// 			// $('.chosen').chosen({
// 			//     width: '50%',
// 			//     allow_single_deselect: true
// 			// });

// }


// function compareScores(){
// 	//compare difference between current user's scores against all other users, question by question 

// 	//add up the results of the differences between arrays to calculate totalDifference;  this means the sum is what I am creating?  Sum of a new totalDifference array?
// 	var totalDifference = Math.abs(results);
	// var sum = 0;
	//for loop to go through the arrays 
	// for(var i =0; i < friendsInfo.length; i++){
	// 	//would the sum total difference be the only thing that mattered? the questions aren't weighted
	// 	sum += arr
	// }


// 	//use Math.abs() to avoid negative responses (5-3 and 3-5 both shoudl return 2)

// }


// function modalDisplay(){
// 	//modal-body.append(topResultFriend.name);
// 	//modal-body.append(topResultFriend.photo);
// 	//$("modal-body").prepend(topResultFriend.name);
// 	//$("modal-body").prepend(topResultFriend.photo);
// }



////////////////// CALL FUNCTIONS 
//console.log all the users in the friends array
// $(document).ready(
	displayFriend();
	// );
//prevent the submit button from going through 
// $("#submit").on("click", function(event){
// 	event.preventDefault();

// });





</script>
</html>