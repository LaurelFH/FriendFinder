<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Take the Friend Finder Survey</title>
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <!--google font link-->
<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre" rel="stylesheet">
<style>

form{

	background-color:rgba(0,0,0,0.5);
	color:white;
	padding-right: 50px;
	padding-bottom: 50px;
	padding-left: 50px;
	padding-top: 10px;
	font-family: 'Averia Serif Libre', cursive;
}

p {
	font-family: 'Averia Serif Libre', cursive;
	color:black;
}

h1, h4 {
	font-family: 'Averia Serif Libre', cursive;


}

a {
	font-family: 'Averia Serif Libre', cursive;
	color: white;
	font-size: larger;
}

body{
	background: url("https://s3.amazonaws.com/zam-www/assets/editorial/2017/01/ffxv_road.jpg");	
	background-repeat: no-repeat;
	background-position: center center;
	background-attachment: fixed;
	-webkit-background-size: cover;
	-moz-background-size: cover;
	-o-background-size: cover;
	background-size: cover;
}

</style>

</head>
<body>
<div class ="container">

	<!-- <form class ="form-horizontal"> -->
	<form>
	<h1> Tell Us About Yourself</h1>
	<!--for spacing purposes also for the choices, are these selects or dorpdown menus?-->
<!-- 	<div class = "form-group">
		<label for ="inputEmail">Email</label>
		<input type ="email" id="inputEmail" placeholder ="Your Email">
	</div> -->
	<div class ="form-group">
		<label for ="inputName">Your Name</label>
		<input type ="text" id="inputName" placeholder="Your Name">
	</div>
	<div class ="form-group">
		<label for ="inputName">Your Photo</label>
		<input type ="text" id="inputPhoto" placeholder="https://your_photo_url">
	</div>	
	<div class ="form-group"><!--starts question-->
		<label for ="question1"><h3>Question 1</h3></label>
		<h4> blah blah blah</h4>
		<!--Selects be sure to add the script links for chosen-->	    
			<select class="form-control" id ="question1">
			  <option value ="1">1 (Strongly Disagree)</option>
			  <option value ="2">2</option>
			  <option value ="3">3</option>
			  <option value ="4">4</option>
			  <option value ="5">5 (Strongly Agree)</option>
			</select>
	</div><!--ends question div-->

	<div class ="form-group"><!--starts question-->
		<label for ="question2"><h3>Question 2</h3></label>
		<h4> blah blah blah</h4>
		<!--Selects be sure to add the script links for chosen-->	    
			<select class="form-control" id ="question2">
			  <option value ="1">1 (Strongly Disagree)</option>
			  <option value ="2">2</option>
			  <option value ="3">3</option>
			  <option value ="4">4</option>
			  <option value ="5">5 (Strongly Agree)</option>
			</select>
	</div><!--ends question div-->
	
		<div class ="form-group"><!--starts question-->
		<label for ="question3"><h3>Question 3</h3></label>
		<h4> blah blah blah</h4>
		<!--Selects be sure to add the script links for chosen-->	    
			<select class="form-control" id ="question3">
			  <option value ="1">1 (Strongly Disagree)</option>
			  <option value ="2">2</option>
			  <option value ="3">3</option>
			  <option value ="4">4</option>
			  <option value ="5">5 (Strongly Agree)</option>
			</select>
	</div><!--ends question div-->
	
	<!--submit button-->

	<button type ="submit" class="btn btn-primary btn-lg btn-block" id ="submit"> Submit Answers</button>
	</form>


<!--insert modal info here with jquery to push the name and photo to the user-->
<!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Here's Your Final Friend</h4>
      </div>
      <div class="modal-body">
        <p>Some text in the modal.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>



</div><!--ends fluid container-->
</body>

<!--FUNCTIONS FOR THE AJAX CALL AND RESULTS-->
<script type ="text/javascript">
//JS to display info in a modal for the friend result
//ajax call to the friends api
function displayFriend(){

	var currentURL = window.location.origin;
	$.ajax({url: currentURL + "/api/friends", method: "GET"})
	.done(function(friendsInfo){
		console.log("--------------");
		console.log("URL:" + currentURL + "/api/friends");
		console.log(friendsInfo);
		console.log("-------------");

		//need to store these differences for later??? May not actually be able to have the people here though (just the numbers)
		var totalDifferencesArray = [];

		for (var friendIndex = 0; friendIndex < friendsInfo.length; friendIndex++){
			// console.log(friendsInfo[i]); new iterator name?
			console.log(friendsInfo[friendIndex].scores);
			//insert infor for the dynamic div element for the friend?  this will give all the info, but maybe they want just one?
			//loop through the score array and compare differences between them from 1 user to another -- need friendsiNfo @ friendIndex and then their score
			var totalDifference = 0; 
			for(var scoreIndex = 0; scoreIndex < friendsInfo[friendsIndex].scores.length; scoreIndex++){
				//get the 1 to 1 scores from this friends score info-- loop through to get these score components 
				//this friend's score @ this value in the score array?-->  
				// need to get the single score values? to setup the comparison 
				//  totalDifference += Math.abs(friendsInfo[friendsIndex].scores[scoreIndex]- newUser.scores[scoreIndex]);
			}//ends inner loop			
		//add the users to the totalDifferencesArray to display later?
		//have total difference for user, plus the total differences array???
		(totalDifferencesArray).push(totalDifference);

		}//ends outer friend loop

		//after totalDiffernece, need to find person with the LEAST difference from my friends array 
		 var minDifference = Math.min(null, totalDifferencesArray);
		 var bestFriendIndex = 0;
		//for loop to figure out where the index of that min number is and get the user?
			for(var differencesIndex = 0; differencesIndex < totalDifferencesArray.length; differencesIndex++){
				if(minDifference == totalDifferencesArray[differencesIndex]){
					bestFriendIndex == differencesIndex; 
				}
			}//end for loop for the differences in the array 
		//get friend out of friendsInfo array 
		console.log(friendsInfo[bestFriendIndex].name);
	});
}

//could just make this a submit click event?
//add html tags here for the photo ot later--? decide after seeing modal?
$("#submit").on("click", function(event){
	event.preventDefault();
	var newUser = {
		name: $("#inputName").val().trim(),
		photo: $("#inputPhoto").val().trim()
		//check the syntax for this, need to be set as another array as above
		// score:  = []
	};
	console.log(newUser);
//post the new friend to the api localhost page 
	// $.post("/api/friends", newUser)
	// .done(function(newFriend){
	// 	console.log("You just added" + newFriend);
	// 	});

		// getNewResponses();
		displayFriend();
});















// function getNewResponses(responses){
// //check if the responses aren't null and are selected
// 	if(document.getElementById(responses) !=null && document.getElementById(responses).selected){
// 		//once check is complete, grab the values of each of the questions from the user and save it as the new user array
// 		// $("#question1 :selected").text();
// 		var name = $("#inputName").val().trim();
// 		var photo = $("#inputPhoto").val().trim();
// 		console.log(name);
// 		console.log(photo);
// 		//select menu options for the scores
// 		var quest1 = $("#question1").val();
// 		var quest2 = $("#question2").val();
// 		var quest3 = $("#question3").val();
// 		console.log(quest1);
// 		console.log(quest2);

// 	}



// }


////////////////// CALL FUNCTIONS 
//console.log all the users in the friends array
// $(document).ready(function(){
	
// 	getNewResponses();
// 	displayFriend();

// });
//prevent the submit button from going through 
// $("#submit").on("click", function(event){
// 	event.preventDefault();

// });





</script>
</html>